<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SensMax TAC-B 3D-WP Unity Integration: SensMax TAC-B Unity integration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SensMax TAC-B 3D-WP Unity Integration
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">SensMax TAC-B Unity integration </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_README"></a> This Unity package is an integration of the SensMax's TAC-B line of sensors. It uses the <a href="https://github.com/dotnet/MQTTnet">MQTTnet</a> package to communicate with the sensor. It facilitates the use of multiple sensors in one project. This package is made for 3D projects, but is equally usable in 2D projects.</p>
<p ><img src="https://github.com/erikbhan/UniTac/assets/42799026/6a9239cf-9510-4e96-bf74-1dcd17c3b8ef" alt="Gif of spawn entities sample in use" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md4"></a>
Installation</h1>
<p >To import our package into Unity, you can use Unity's built-in Package Manager. You find this under "Window" &gt; "Package Manager" in the Unity Editor.</p>
<p ><img src="https://github.com/erikbhan/UniTac/assets/42799026/3db44466-6439-45c1-84af-aa3183f58b16" alt="Opening Package Manager" class="inline"/></p>
<p >In the Package Manager window, press the "+"-button, and then "Add package from git URL...". You can use both HTTPS and SSH to import the package.</p>
<p ><img src="https://github.com/erikbhan/UniTac/assets/42799026/fca9382e-c42a-47cb-a244-1ee49729b7ab" alt="Adding from git" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md5"></a>
Usage</h1>
<p >After importing our package, you first need a manager to administrate the sensor. Click and drag our pre-made prefab into either the Unity Scene or the Unity Hierarchy from the Package folder. To troubleshoot the MQTT client or server, you can change the logging level in the manager prefab's Inspector window. You can also set a custom port if you'd like. Keep logging disabled in final product to maximize efficiency.</p>
<p ><img src="https://github.com/erikbhan/UniTac/assets/42799026/cb563644-6f36-448c-9acc-9b1c875bf64b" alt="Manager inspector window" class="inline"/></p>
<p >To handle incoming messages any sensors needs to be added. Use the "Add Sensor"-button on the manager Inspector window to add any number of sensors.</p>
<p ><img src="https://github.com/erikbhan/UniTac/assets/42799026/2e2a6da1-d3ec-4657-a13f-740ea732c262" alt="Add sensor button" class="inline"/></p>
<p >Configure each sensor via the Inspector window; you need to set the "serial" field equal to the physical sensor's serial number. Seconds until idle is simply the time from the last message until the sensor considers itself "idle". If using the sensor in a 2D project the sensor rotation must be set to X=90.</p>
<p ><img src="https://github.com/erikbhan/UniTac/assets/42799026/cd2ff6c6-67d4-4ab5-bce4-b0b6151444d7" alt="Sensor inspector window" class="inline"/></p>
<p >Finally, you need to add functionality to the sensor, either by adding a sample or your own script. Simply drag the wanted functionality onto the sensor GameObject in the Unity Hierarchy or use the "Add component"-button in the sensor inspector window.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Sensor Events</h2>
<p >The sensor implements the <a href="https://en.wikipedia.org/wiki/Observer_pattern">observer pattern</a>, utilizing <a href="https://docs.unity3d.com/ScriptReference/Events.UnityEvent.html">UnityEvent</a>. Because the sensor only sends a new packet every 100ms, we avoid some overhead by not checking the sensor every frame. In addition, you can add as many listeners as you want without creating unnecessary coupling in your code.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">UnityEvent   </th><th class="markdownTableHeadNone">Functionality    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">MessageReceivedEvent   </td><td class="markdownTableBodyNone">This event is invoked when the sensor-object receives a new update from the physical sensor.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">StatusChangedEvent   </td><td class="markdownTableBodyNone">This event is invoked when the sensor changes active/idle-status.   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md7"></a>
Samples</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Sample   </th><th class="markdownTableHeadNone">Functionality    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="classSpawnOnEntity.html" title="Sample monobehaviour that spawns GameObjects that represents any entities detected by the sensor.">SpawnOnEntity</a>   </td><td class="markdownTableBodyNone">Spawns and maintains the local position of GameObject for each object detected by the sensor. Needs a GameObject to spawn    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="classLogSessionData.html" title="Sample monobehaviour that saves sensor session data to a separate log file.">LogSessionData</a>   </td><td class="markdownTableBodyNone">Logs the session data in a txt-file in JSON-format. Session data includes: active/idle-status, start time and session length. May be given a path to generate file in desired location. Default path: ./Assets/SensorSerial-Log.txt    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="classStateMachine.html" title="Sample monobehaviour that acts as a simple state machine.">StateMachine</a>   </td><td class="markdownTableBodyNone">Switches between each gameObject based on the active/idle-status of the sensor. Needs three individual GameObjects.   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md8"></a>
Using credentials to authorize MQTT-connections</h2>
<p >The manager can be set up with a username and password so that connections can be authorized. This does not mean packets cannot be intercepted, but stops connections that does not have the right credentials. Keep in mind that password is not encrypted when sent from the sensor so any password used here is compromised. To use credentials add a txt-file containing this to your project:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;username&quot;:&quot;YOUR_USERNAME&quot;,</div>
<div class="line">    &quot;password&quot;:&quot;SECRET_PASSWORD&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><p >Then add the relative path to this file to the "Secret File Path"-variable in the manager inspector window. The relative path to your file can be found in Unity by right clicking it and selecting "Copy path".</p>
<p ><img src="https://github.com/erikbhan/UniTac/assets/42799026/9cbc03c5-3410-48e0-ba75-e7f8cfffb850" alt="ManagerInspector-secrets" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md9"></a>
Saving 5-minute-packets</h2>
<p >The sensor automatically sends a "5-minute-data"-packet every 5 minutes. As a default the manager discards these to not waste time. The script "DataPacketClient" can be added to manager to log these messages in a separate file.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
Documentation</h2>
<p >For concrete examples on how to use our library, please see the <code>Samples</code> folder.</p>
<p >For API documentation, please see the <a href="https://erikbhan.github.io/UniTac/">wiki</a>.</p>
<h1><a class="anchor" id="autotoc_md11"></a>
Contributing</h1>
<p >Pull requests are welcome. For major changes, please open an issue first to discuss what you would like to change.</p>
<p >Please make sure to update tests as appropriate.</p>
<h1><a class="anchor" id="autotoc_md12"></a>
Project status</h1>
<p >This project is a bachelor thesis project. This means that after the project period ends further development from the original team is unlikely.</p>
<h1><a class="anchor" id="autotoc_md13"></a>
License</h1>
<p ><a href="https://choosealicense.com/licenses/mit/">MIT</a> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
